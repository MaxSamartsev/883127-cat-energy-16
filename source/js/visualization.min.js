var scaleWidth,gripWidth,tabletWidth=768,visual=document.querySelector(".visualization"),visualBlock=visual.querySelector(".visualization__wrapper"),btnBefore=document.querySelector(".visualization__label--before"),btnAfter=document.querySelector(".visualization__label--after"),scale=visual.querySelector(".visualization__scale"),grip=visual.querySelector(".visualization__grip"),imageBefore=visual.querySelector(".visualization__image--before"),imageAfter=visual.querySelector(".visualization__image--after"),windowSize=window.screen.width,getElemWidth=function(e){return parseInt(getComputedStyle(e).width,10)};btnBefore.onclick=function(e){windowSize<tabletWidth?(imageAfter.style.right="",imageBefore.style.left="",visualBlock.classList.remove("visualization__wrapper--after"),visualBlock.classList.add("visualization__wrapper--before")):(e.preventDefault(),imageAfter.style.width="0",grip.style.marginLeft="0")},btnAfter.onclick=function(e){e.preventDefault(),windowSize<tabletWidth?(imageAfter.style.right="0px",imageBefore.style.left="-320px",visualBlock.classList.remove("visualization__wrapper--before"),visualBlock.classList.add("visualization__wrapper--after")):(imageAfter.style.width="100%",grip.style.marginLeft="calc(100% - "+gripWidth+"px)",imageAfter.style.transition="width 0.1s ease-in-out")},grip.ondblclick=function(){imageBefore.style.width="50%",imageAfter.style.width="50%",grip.style.marginLeft="calc(50% - "+gripWidth/2+"px)"};var getCoords=function(e){return e.getBoundingClientRect().left+pageXOffset+200},gripDownHandler=function(e){var i=getCoords(grip),a=getCoords(scale);grip.style.transition="none";var o=e.pageX-i;return document.onmousemove=function(e){imageAfter.style.transition="none";var i=e.pageX-o-a;i<0&&(i=0);var t=scaleWidth-gripWidth;t<i&&(i=t);var r=i/t*100;grip.style.marginLeft=i+"px",imageAfter.style.width=r+"%"},!(document.onmouseup=function(){document.onmousemove=document.onmouseup=null,grip.style.transition="margin-left 0.2s ease-out"})},addGripHandlers=function(){grip.addEventListener("mousedown",gripDownHandler)},removeGripHandlers=function(){grip.removeEventListener("mousedown",gripDownHandler)},start=function(){windowSize=window.screen.width,scaleWidth=getElemWidth(scale),gripWidth=getElemWidth(grip),imageBefore.style.width="",imageAfter.style.width="",imageAfter.style.right="",imageBefore.style.left="",grip.style.marginLeft="",imageAfter.style.transition="",imageBefore.style.transition="",visualBlock.classList.remove("visualization__wrapper--before"),visualBlock.classList.remove("visualization__wrapper--after"),tabletWidth<=windowSize?addGripHandlers():(removeGripHandlers(),visualBlock.classList.add("visualization__wrapper--before"),imageAfter.style.transition="right 0.5s ease-out",imageBefore.style.transition="left 0.5s ease-out")};window.addEventListener("load",start),window.addEventListener("resize",start);
